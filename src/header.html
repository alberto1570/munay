<!-- header.html -->
<header>
    <div class="logo">
        <a href="#"><img src="assets/imagenes/logo.png" alt="Logo del Restaurante"></a>
    </div>
    <nav>
        <ul>
            
            <li><a href="#">Menú</a></li>
            <li><a href="#">Contacto</a></li>
        </ul>
    </nav>
    <div class="auth-buttons">
        <a href="login.html" class="btn" id="login-btn">Iniciar Sesión</a>
        <a href="register.html" class="btn" id="register-btn">Registrarse</a>
        <button class="btn" id="logout-btn" style="display:none;">Cerrar Sesión</button>
    </div>
</header>

<script type="module">
    import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-auth.js";
    
    const auth = getAuth();

    // Controlar la visibilidad de los botones según el estado de autenticación del usuario
    onAuthStateChanged(auth, (user) => {
        if (user) {
            // Usuario autenticado
            document.getElementById('login-btn').style.display = 'none';
            document.getElementById('register-btn').style.display = 'none';
            document.getElementById('logout-btn').style.display = 'block';
        } else {
            // Usuario no autenticado
            document.getElementById('login-btn').style.display = 'block';
            document.getElementById('register-btn').style.display = 'block';
            document.getElementById('logout-btn').style.display = 'none';
        }
    });

    // Manejar el evento de cerrar sesión
    document.getElementById('logout-btn').addEventListener('click', async () => {
        try {
            await signOut(auth);
            console.log('Sesión cerrada con éxito.');
            window.location.href = 'index.html'; // Redirigir a la página de inicio después de cerrar sesión
        } catch (error) {
            console.error('Error al cerrar sesión:', error);
        }
    });
</script>
